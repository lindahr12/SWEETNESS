<div class="container">
<div class="col-md-12">
  <!-- START LATEST TRANSACTIONS -->
  <div class="block block-condensed">
    <div class="app-heading">
      <div class="title">
        <h2>Les categories </h2>
        <p>Information rapide</p>
      </div>
      <div class="row margin-bottom-30 margin-top-10">
        <div class="col-md-6 col-md-offset-3 col-sm-12">
          <div class="col-xs-5">
            <button class="btn btn-primary btn-block btn-icon-fixed" >
              <span class="fa fa-caret-left"></span>
              Liste produit
            </button>
          </div>
          <div class="col-xs-5">
            <button class="btn btn-primary btn-block btn-icon-fixed" data-toggle="modal" data-target="#modal-primary">
              <span class="fa fa-plus"></span>
              Ajouter categorie
            </button>
          </div>
        </div>
      </div>

    </div>
    <div class="block-content">
      <div class="table-responsive">
        <table class="table table-clean-paddings margin-bottom-0">
          <thead>
          <tr><th>Categorie</th>
            <th width="150">mis à jour à</th>
            <th width="20">Actions</th>
            <th width="55"></th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let i of data">
            <td>
              <div class="contact contact-rounded contact-bordered contact-lg" *ngFor="let k of i.images">
                  <img src='{{getSantizeUrl(k.url)}}' >
                <div class="contact-container"><a href="#">{{i.nom}}</a>
                  <span>{{i.created_at| date}} </span>
                </div>
              </div>
            </td>
            <td>{{i.created_at|date}}</td>

            <td><button type="submit" (click)="recuperer(i.id,i.nom,i.images.url,i.parent_id)" class="btn btn-default btn-icon btn-clean dropdown-toggle"  data-toggle="modal" data-target="#id" aria-haspopup="true" aria-expanded="false">
              <span  class="fa fa-pencil"></span>
            </button></td>
            <td>


              <button type="submit" (click)="delete(i.id)" class="btn btn-default btn-icon"><span class="icon-cross-circle"></span></button>

            </td>
          </tr>
          </tbody></table></div></div></div><!-- END LATEST TRANSACTIONS --></div>
</div>


<!--Modal-->
<div class="modal fade" id="id" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="title" id="defaultModalLabel">Update categorie</h4>
      </div>
      <div class="modal-body">



        <div class="col-lg-12 col-md-6 col-sm-6">


          <div class="body">
            <form [formGroup]="categorieedit"  (ngSubmit)="edit()" >

              <div class="form-group col-sm-8">
                <label>Nom</label>
                <input type="text"  formControlName="nom" class="form-control" [ngClass]="{ 'is-invalid': submitted && E.nom.errors }"  />
                <div *ngIf="submitted && E.nom.errors" class="invalid-feedback">
                  <div *ngIf="E.nom.errors.required">
                    Le nom est obligatoire</div>
                </div>
              </div>
              <div class="form-group col-sm-8">
                <label>Image</label>
                <input type="file"  formControlName="image" class="form-control" [ngClass]="{ 'is-invalid': submitted && E.image.errors }"  />
                <div *ngIf="submitted && E.image.errors" class="invalid-feedback">
                  <div *ngIf="E.image.errors.required">First Name is required</div>
                </div>
              </div>
              <div class="form-group col-sm-8">
                <label>Categorie</label>
                <select class="form-control" formControlName="parent_id" id="exampleFormControlSelect1" [(ngModel)]="parent_id"ngValue="parent_id"  name="parent_id" [ngClass]="{ 'is-invalid': submitted && E.parent_id.errors }" >
                  <option></option>
                  <option *ngFor="let k of data" ngValue="{{k.id}}">{{k.nom}}</option>

                </select>
                <div *ngIf="submitted && E.parent_id.errors" class="invalid-feedback">
                  <div *ngIf="E.parent_id.errors.required"></div>
                </div>
              </div>

              <div class="form-group col-sm">
                <button  type="submit" class="btn btn-primary"  data-dismiss="modal"  >Update</button>
                <button type="button" class="btn btn-simple" data-dismiss="modal">CLOSE</button>

              </div>
            </form>
          </div>
        </div>
      </div>



    </div>
  </div>
</div>



<!-- MODAL PRIMARY -->
<div class="modal fade" id="modal-primary" tabindex="-1" role="dialog" aria-labelledby="modal-primary-header">
  <div class="modal-dialog modal-primary" role="document">
    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
      <span aria-hidden="true" class="icon-cross"></span>
    </button>
    <div class="modal-content"><div class="modal-header">
      <h4 class="modal-title" id="modal-primary-header">Ajout lot</h4>
    </div>
      <form #f="ngForm" (ngSubmit)="onSubmit(f)">
        <div class="form-group">
          <label class="col-md-2 control-label">Nom</label>
          <div class="col-md-5">
            <input type="text" class="mask_date form-control" name="nom" ngModel>
            <span class="help-block">Nom de la categorie au moins 4 caractére</span>
          </div>

        </div>

        <div class="form-group">

          <label class="col-md-2 control-label">Image</label>
          <div class="col-md-10">
            <div class="upload-btn-wrapper">
              <button class="btn btn-default">Upload a file</button>
              <input type="file" class="mask_phone form-control" #fileupload [(ngModel)]="myFile" name="myFile" (change)="fileEvent($event)">
              <span class="help-block">Image de la categorie</span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="exampleFormControlSelect1" class="col-md-2 control-label">Categorie disponible</label>
          <div class="col-md-10">
            <select class="form-control" id="exampleFormControlSelect1" [(ngModel)]="parent_id"ngValue="parent_id"  name="parent_id" >
              <option></option>
              <option *ngFor="let i of data" ngValue="{{i.id}}">{{i.nom}} </option>

            </select>
          </div>
        </div>


        <div class="form-group margin-top-20"><button class="btn btn-default" type="submit">Submit & Validate</button></div>


      </form>
    </div>
  </div><!-- END MODAL PRIMARY -->
</div>
<!--END MODEL PRIMARY -->
